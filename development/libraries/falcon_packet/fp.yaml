defines:
  MAX_FRAME_SIZE: 96
  MAX_PACKET_SIZE: 94
  FRAME_DELIMITER1: 0x51
  FRAME_DELIMITER2: 0x98
  PACKET_DELIMITER1: 0xA7
  PACKET_DELIMITER2: 0xB9
  PACKET_HEADER_SIZE: 0x3
  FRAME_HEADER_SIZE: 0x3
  FRAME_FOOTER_SIZE: 0x2

enums:
  - name: falconMode
    size: 1
    values:
    - {name: FALCON_MODE_IDLE, value: 0x0}
    - {name: FALCON_MODE_CALIBRATING, value: 0x1}
    - {name: FALCON_MODE_FCS_READY, value: 0x2}
    - {name: FLIGHT_MODE_FLY, value: 0x3}

types:
  - { name: u8, size: 1, primitive: true }
  - { name: i8, size: 1, primitive: true }
  - { name: u16, size: 2, primitive: true }
  - { name: i16, size: 2, primitive: true }
  - { name: u32, size: 4, primitive: true }
  - { name: i32, size: 4, primitive: true }
  - { name: f32, size: 4, primitive: true }
  - name: motorPWMControlData
    fields:
      - { name: motor1, type: u16}
      - { name: motor2, type: u16}
      - { name: motor3, type: u16}
      - { name: motor4, type: u16}

  - name: fcsStateEstimate
    fields:
      - { name: x, type: f32}
      - { name: y, type: f32}
      - { name: z, type: f32}
      - { name: dx, type: f32}
      - { name: dy, type: f32}
      - { name: dz, type: f32}
      - { name: yaw, type: f32}
      - { name: pitch, type: f32}
      - { name: roll, type: f32}
      - { name: p, type: f32}
      - { name: q, type: f32}
      - { name: r, type: f32}

  - name: statusData
    fields:
      - { name: mode, type: falconMode}
      - { name: motor, type: motorPWMControlData}
      - { name: states, type: fcsStateEstimate}

  - name: fcsControlInput
    fields:
      - { name: yaw, type: f32}
      - { name: pitch, type: f32}
      - { name: roll, type: f32}
      - { name: alt, type: f32}

packets:
  - name: mode
    command: true
    query: true
    response: true
    fields:
      - { name: mode, type: falconMode}

  - name: flightControl
    command: true
    query: false
    response: false
    fields:
      - { name: fcsControlCmd, type: fcsControlInput}

  - name: status
    command: false
    query: false
    response: true
    fields:
      - {name: status, type: statusData}
